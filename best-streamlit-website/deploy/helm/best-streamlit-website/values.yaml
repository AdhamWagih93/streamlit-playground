namespace: best-streamlit-website

images:
  streamlit:
    repository: best-streamlit-website/streamlit
    tag: local
    pullPolicy: IfNotPresent
  postgres:
    repository: postgres
    tag: 16-alpine
    pullPolicy: IfNotPresent
  scheduler:
    repository: best-streamlit-website/scheduler
    tag: local
    pullPolicy: IfNotPresent
  mcpJenkins:
    repository: best-streamlit-website/mcp-jenkins
    tag: local
    pullPolicy: IfNotPresent
  mcpKubernetes:
    repository: best-streamlit-website/mcp-kubernetes
    tag: local
    pullPolicy: IfNotPresent
  agentDataGen:
    repository: best-streamlit-website/agent-datagen
    tag: local
    pullPolicy: IfNotPresent
  agentJenkins:
    repository: best-streamlit-website/agent-jenkins
    tag: local
    pullPolicy: IfNotPresent
  agentKubernetes:
    repository: best-streamlit-website/agent-kubernetes
    tag: local
    pullPolicy: IfNotPresent

env:
  ollamaBaseUrl: http://ollama:11434
  ollamaModel: qwen2.5:7b-instruct-q6_K

  jenkinsBaseUrl: http://jenkins:8080
  jenkinsVerifySsl: "true"
  jenkinsMcpClientToken: dev-jenkins-mcp-token
  jenkinsMcpTransport: streamable-http
  jenkinsMcpUrl: http://jenkins-mcp:8000/mcp

  k8sContext: ""
  kubernetesMcpTransport: streamable-http
  kubernetesMcpUrl: http://kubernetes-mcp:8000/mcp

  schedulerMcpTransport: streamable-http
  schedulerMcpUrl: http://scheduler:8010/mcp

  # Central DB for scheduler history (recommended in K8s).
  # Example:
  # platformDatabaseUrl: postgresql+psycopg2://user:pass@platform-db-pgpool:5432/platform
  platformDatabaseUrl: postgresql+psycopg2://bsw:bsw@postgres:5432/bsw

components:
  streamlit: true
  scheduler: false
  mcpJenkins: true
  mcpKubernetes: true
  agentDataGen: true
  agentJenkins: true
  agentKubernetes: true
  postgres: true

replicas:
  streamlit: 1
  scheduler: 1
  mcpJenkins: 1
  mcpKubernetes: 1
  agentDataGen: 1
  agentJenkins: 1
  agentKubernetes: 1

service:
  streamlit:
    type: ClusterIP
    port: 80
  scheduler:
    type: ClusterIP
    port: 8010
  agents:
    type: ClusterIP
    port: 8080
  mcp:
    type: ClusterIP
    port: 8000
  postgres:
    type: ClusterIP
    port: 5432

postgres:
  database: bsw
  username: bsw
  password: bsw
  storageSize: 1Gi

# Resource requests/limits (very low defaults).
# Override these per environment (dev/minikube vs prod) as needed.
resources:
  streamlit:
    requests:
      cpu: 10m
      memory: 128Mi
    limits:
      cpu: 50m
      memory: 256Mi
  scheduler:
    requests:
      cpu: 5m
      memory: 64Mi
    limits:
      cpu: 30m
      memory: 128Mi
  mcpJenkins:
    requests:
      cpu: 5m
      memory: 64Mi
    limits:
      cpu: 30m
      memory: 128Mi
  mcpKubernetes:
    requests:
      cpu: 5m
      memory: 64Mi
    limits:
      cpu: 30m
      memory: 128Mi
  agentDataGen:
    requests:
      cpu: 5m
      memory: 64Mi
    limits:
      cpu: 30m
      memory: 128Mi
  agentJenkins:
    requests:
      cpu: 5m
      memory: 64Mi
    limits:
      cpu: 30m
      memory: 128Mi
  agentKubernetes:
    requests:
      cpu: 5m
      memory: 64Mi
    limits:
      cpu: 30m
      memory: 128Mi
  postgres:
    requests:
      cpu: 10m
      memory: 64Mi
    limits:
      cpu: 50m
      memory: 256Mi
