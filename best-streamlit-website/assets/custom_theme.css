/* ===========================================================================
   BEST STREAMLIT WEBSITE - UNIFIED DESIGN SYSTEM
   =========================================================================== */

/* ---------------------------------------------------------------------------
   CSS VARIABLES - Design System Foundation
   --------------------------------------------------------------------------- */
:root {
  /* Colors - Primary Palette */
  --primary-gradient: linear-gradient(120deg, #0b63d6, #6c5ce7, #00b894);
  --primary-blue: #2563EB;
  --primary-purple: #6c5ce7;
  --primary-green: #00b894;

  /* Semantic Colors */
  --success: #10B981;
  --warning: #F59E0B;
  --danger: #EF4444;
  --info: #3B82F6;

  /* Neutrals */
  --bg-primary: #ffffff;
  --bg-secondary: #F8FAFC;
  --bg-tertiary: #E2E8F0;
  --text-primary: #0F172A;
  --text-secondary: #64748B;
  --text-muted: #94A3B8;

  /* Spacing Scale */
  --spacing-xs: 0.25rem;  /* 4px */
  --spacing-sm: 0.5rem;   /* 8px */
  --spacing-md: 1rem;     /* 16px */
  --spacing-lg: 1.5rem;   /* 24px */
  --spacing-xl: 2rem;     /* 32px */
  --spacing-2xl: 3rem;    /* 48px */

  /* Typography */
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;
  --font-size-3xl: 1.875rem;

  /* Border Radius */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  --shadow-primary: 0 10px 40px rgba(11, 99, 214, 0.3);

  /* Transitions */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);

  /* TTM Legacy Variables (for backward compatibility) */
  --app-bg-start: #b9cee3;
  --app-bg-mid: #c7d8e9;
  --app-bg-end: #e4edf5;
  --card-bg: #f5f8fc;
  --card-bg-accent: #eef3f9;
}

/* ---------------------------------------------------------------------------
   UTILITY CLASSES - Reusable Components
   --------------------------------------------------------------------------- */

/* Hero Sections */
.st-hero {
  background: var(--primary-gradient);
  border-radius: var(--radius-xl);
  padding: var(--spacing-xl) var(--spacing-2xl);
  margin-bottom: var(--spacing-xl);
  color: white;
  box-shadow: var(--shadow-primary);
  animation: fadeInUp var(--transition-base);
}

.st-hero h1 {
  font-size: var(--font-size-3xl);
  font-weight: 800;
  margin: 0 0 var(--spacing-sm) 0;
  letter-spacing: 0.5px;
  color: white;
}

.st-hero p {
  font-size: var(--font-size-lg);
  margin: 0;
  opacity: 0.95;
  color: white;
}

/* Cards */
.st-card {
  background: linear-gradient(145deg, var(--bg-primary), var(--bg-secondary));
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--bg-tertiary);
  box-shadow: var(--shadow-md);
  transition: all var(--transition-base);
}

.st-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-xl);
  border-color: var(--primary-blue);
}

.st-card-header {
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: var(--spacing-md);
}

.st-card-body {
  color: var(--text-secondary);
  font-size: var(--font-size-md);
  line-height: 1.6;
}

/* Metrics/KPIs */
.st-metric {
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  padding: var(--spacing-lg);
  text-align: center;
  border: 1px solid var(--bg-tertiary);
  transition: all var(--transition-base);
}

.st-metric:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.st-metric-value {
  font-size: var(--font-size-2xl);
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: var(--spacing-xs);
  line-height: 1;
}

.st-metric-label {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.st-metric-delta {
  font-size: var(--font-size-sm);
  font-weight: 600;
  margin-top: var(--spacing-xs);
}

.st-metric-delta.positive { color: var(--success); }
.st-metric-delta.negative { color: var(--danger); }
.st-metric-delta.neutral { color: var(--text-muted); }

/* Status Badges */
.st-badge {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-md);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: 600;
  white-space: nowrap;
  transition: all var(--transition-fast);
}

.st-badge-success {
  background: #DCFCE7;
  color: #166534;
  border: 1px solid #86EFAC;
}

.st-badge-warning {
  background: #FEF3C7;
  color: #92400E;
  border: 1px solid #FCD34D;
}

.st-badge-danger {
  background: #FEE2E2;
  color: #991B1B;
  border: 1px solid #FCA5A5;
}

.st-badge-info {
  background: #DBEAFE;
  color: #1E40AF;
  border: 1px solid #93C5FD;
}

.st-badge-primary {
  background: linear-gradient(120deg, #2563EB, #3B82F6);
  color: white;
  border: none;
  box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
}

/* Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

.animate-fadeIn {
  animation: fadeInUp 300ms var(--transition-base);
}

.animate-slideIn {
  animation: slideInRight 250ms var(--transition-base);
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Status Indicators */
.st-status {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--font-size-sm);
  font-weight: 600;
}

.st-status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
}

.st-status-healthy .st-status-dot { background: var(--success); }
.st-status-warning .st-status-dot { background: var(--warning); }
.st-status-error .st-status-dot { background: var(--danger); }
.st-status-info .st-status-dot { background: var(--info); }

/* Grid Layouts */
.st-grid {
  display: grid;
  gap: var(--spacing-lg);
}

.st-grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
.st-grid-3 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
.st-grid-4 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }

/* Dividers */
.st-divider {
  height: 1px;
  background: linear-gradient(to right, transparent, var(--bg-tertiary), transparent);
  margin: var(--spacing-xl) 0;
}

/* ===========================================================================
   TTM: The JIRA Killer Theme (Legacy - Preserved for Task Manager)
   =========================================================================== */

/* 1. Core & Typography */
body {
    /* Introduce a more contrasting soft colored background */
    --app-bg-start: #b9cee3; /* slightly desaturated steel blue */
    --app-bg-mid: #c7d8e9;
    --app-bg-end: #e4edf5; /* keeps overall lightness for readability */
    --card-bg: #f5f8fc; /* darker than pure white */
    --card-bg-accent: #eef3f9; /* panel / column background */
    background: linear-gradient(135deg,var(--app-bg-start) 0%, var(--app-bg-mid) 38%, var(--app-bg-end) 100%);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
    color: #2f3d4e;
}

/* Force gradient through all layout shells */
html, body, .stApp, [data-testid="stAppViewContainer"], section.main, section.main > div {
    background: linear-gradient(135deg,var(--app-bg-start,#b9cee3) 0%, var(--app-bg-mid,#c7d8e9) 40%, var(--app-bg-end,#e4edf5) 100%) !important;
    background-attachment: fixed;
}

/* Make primary content wrapper transparent so gradient is visible */
.main .block-container { background: transparent !important; }

/* Subtle noise overlay for texture */
html:before {
    content: "";
    position: fixed; inset: 0; pointer-events: none; z-index: -1;
    background-image: linear-gradient(45deg, rgba(255,255,255,0.05) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0.05) 75%, transparent 75%, transparent);
    background-size: 6px 6px;
    mix-blend-mode: overlay;
    opacity: .55;
}

h1, h2, h3, h4, h5, h6 {
    color: #1E293B; /* Darker, more professional header */
    font-weight: 700;
}

a {
    color: #2563EB;
    text-decoration: none;
    transition: color 0.2s ease;
}

a:hover {
    color: #1D4ED8;
}

/* 2. Main Layout & Containers */
.main .block-container {
    padding-top: 2rem;
    padding-bottom: 2rem;
}

.stApp {
    background: transparent;
}

/* 3. Sidebar */
.sidebar .sidebar-content {
    background: #FFFFFF;
    border-right: 1px solid #E2E8F0;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

/* 4. Buttons */
.stButton > button {
    border-radius: 24px;
    padding: 8px 18px;
    font-weight: 600;
    font-size: 0.8rem;
    transition: all 0.25s ease-out;
    border: 1px solid transparent;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

/* Primary Button */
.stButton > button:not(:has(span[data-baseweb="icon"])) {
    background: linear-gradient(120deg, #2563EB, #3B82F6);
    color: white;
    border-color: #2563EB;
}

.stButton > button:not(:has(span[data-baseweb="icon"])):hover {
    background: linear-gradient(120deg, #1D4ED8, #2563EB);
    transform: translateY(-1px);
    box-shadow: 0 6px 12px -2px rgba(37, 99, 235, 0.3);
}

/* Secondary/Action Buttons (like on cards) */
.stButton > button:has(span[data-baseweb="icon"]),
.stButton > button:has(p:contains("â†")),
.stButton > button:has(p:contains("â†’")),
.stButton > button:has(p:contains("â†‘")),
.stButton > button:has(p:contains("â†“")),
.stButton > button:has(p:contains("âœï¸")),
.stButton > button:has(p:contains("ðŸ•’")),
.stButton > button:has(p:contains("ðŸ—‘ï¸")),
.stButton > button:has(p:contains("ðŸ¤")) {
    background: #FFFFFF;
    color: #475569;
    border: 1px solid #CBD5E1;
    padding: 4px 8px;
    font-size: 0.7rem;
}

.stButton > button:has(span[data-baseweb="icon"]):hover,
.stButton > button:has(p:contains("â†")):hover,
.stButton > button:has(p:contains("â†’")):hover,
.stButton > button:has(p:contains("â†‘")):hover,
.stButton > button:has(p:contains("â†“")):hover,
.stButton > button:has(p:contains("âœï¸")):hover,
.stButton > button:has(p:contains("ðŸ•’")):hover,
.stButton > button:has(p:contains("ðŸ—‘ï¸")):hover,
.stButton > button:has(p:contains("ðŸ¤")):hover {
    background: #F8FAFC;
    border-color: #94A3B8;
    color: #1E293B;
}

/* Destructive Action (like Defer confirmation) */
.stButton > button:has(p:contains("Confirm Defer")) {
    background: #DC2626;
    color: white;
    border-color: #B91C1C;
}
.stButton > button:has(p:contains("Confirm Defer")):hover {
    background: #B91C1C;
}


/* 5. Inputs & Widgets */
.stTextInput > div > div > input,
.stTextArea > div > textarea,
.stSelectbox > div > div {
    background-color: #FFFFFF;
    border: 1px solid #E2E8F0;
    border-radius: 12px;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.03);
    transition: all 0.2s ease;
}

.stTextInput > div > div > input:focus,
.stTextArea > div > textarea:focus,
.stSelectbox > div > div:focus-within {
    border-color: #3B82F6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

/* 6. Tabs */
.stTabs [data-baseweb="tab-list"] {
    gap: 24px;
    border-bottom: 2px solid #E2E8F0;
}
.stTabs [data-baseweb="tab"] {
    padding: 12px 8px;
    font-weight: 600;
    color: #64748B;
}
.stTabs [data-baseweb="tab"][aria-selected="true"] {
    color: #1E293B;
    border-bottom-color: #2563EB;
}

/* 7. Popovers */
[data-baseweb="popover"] {
    border-radius: 16px !important;
    box-shadow: 0 8px 24px -4px rgba(24, 39, 75, 0.12), 0 6px 12px -6px rgba(24, 39, 75, 0.12) !important;
    border: 1px solid #E2E8F0 !important;
    background: #FFFFFF !important;
}

/* 8. Expander */
.stExpander {
    border: 1px solid #E2E8F0 !important;
    border-radius: 16px !important;
    background: #FFFFFF;
}
.stExpander header {
    font-weight: 600;
    color: #334155;
}

/* 9. Custom App-Specific Styles (consolidated from python file) */
.ttm-container { max-width:1250px;margin:0 auto;animation:fadeIn .6s ease; }
h1, .block-container > h1 { background:linear-gradient(120deg,#0b63d6,#6c5ce7,#00b894); -webkit-background-clip:text; background-clip:text; color:transparent; animation:hueShift 8s linear infinite, titleFloat 6s ease-in-out infinite; letter-spacing:1px; position:relative; }
@keyframes hueShift { 0%{filter:hue-rotate(0deg);}100%{filter:hue-rotate(360deg);} }
@keyframes titleFloat { 0%,100%{text-shadow:0 4px 14px rgba(11,99,214,.35);}50%{text-shadow:0 6px 22px rgba(108,92,231,.55);} }
@keyframes fadeIn { from{opacity:0;transform:translateY(6px);} to{opacity:1;transform:translateY(0);} }
@keyframes popIn { 0%{transform:scale(.95);opacity:0;} 100%{transform:scale(1);opacity:1;} }
@keyframes pulseGlow { 0%{box-shadow:0 0 0 0 rgba(214,48,49,0.55);}70%{box-shadow:0 0 0 12px rgba(214,48,49,0);}100%{box-shadow:0 0 0 0 rgba(214,48,49,0);} }
@keyframes shimmer { 0%{background-position:-200% 0;}100%{background-position:200% 0;} }
.ttm-kanban-col { background:linear-gradient(155deg,var(--card-bg-accent),#dde7f1); border-radius:16px; box-shadow:0 4px 20px -4px rgba(11,99,214,0.12),0 2px 6px -1px rgba(0,0,0,0.06); padding:1.15rem .75rem .85rem; margin-bottom:1.3rem; min-height:190px; position:relative; overflow:hidden; }
.ttm-kanban-col:before { content:"";position:absolute;inset:0;background:linear-gradient(120deg,rgba(11,99,214,0.07),rgba(108,92,231,0.05),rgba(0,184,148,0.07));opacity:0;transition:opacity .4s;pointer-events:none; }
.ttm-kanban-col:hover:before { opacity:1; }
.ttm-status-header { font-size:1.05rem;font-weight:700;letter-spacing:.6px;margin-bottom:.65rem;padding:.35rem 0;border-radius:10px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.25); }
.ttm-status-Backlog { background:linear-gradient(120deg,#b2bec3,#636e72); }
.ttm-status-To-Do { background:linear-gradient(120deg,#74b9ff,#0984e3); }
.ttm-status-In-Progress { background:linear-gradient(120deg,#ffeaa7,#fdcb6e); color:#222; }
.ttm-status-Review { background:linear-gradient(120deg,#a29bfe,#6c5ce7); }
.ttm-status-Done { background:linear-gradient(120deg,#55efc4,#00b894); color:#103b2f; }
.ttm-status-Closed { background:linear-gradient(120deg,#dfe6e9,#b2bec3); color:#2d3436; }
.ttm-task-card { background:var(--card-bg); border-radius:14px; box-shadow:0 4px 14px -4px rgba(11,99,214,0.20),0 2px 5px -2px rgba(0,0,0,0.10); padding:.85rem .8rem .75rem .85rem; margin-bottom:.9rem; transition:box-shadow .25s, transform .18s; border:1px solid #cfd9e5; position:relative; animation:popIn .35s ease; }
.ttm-task-card:hover { box-shadow:0 8px 26px -6px rgba(11,99,214,0.28),0 4px 10px -4px rgba(0,0,0,0.12); transform:translateY(-3px); }
.ttm-overdue { border:1px solid #d63031 !important; animation:pulseGlow 2.6s infinite; }
.ttm-overdue-badge { position:absolute; top:6px; right:8px; background:linear-gradient(90deg,#d63031,#b71c1c); color:#fff; font-size:0.62rem; font-weight:700; padding:2px 6px; border-radius:12px; letter-spacing:0.5px; box-shadow:0 0 0 1px #fff,0 2px 4px rgba(0,0,0,0.15); }
.ttm-task-meta span.ttm-overdue-date { color:#b71c1c;font-weight:600; }
.ttm-task-title { font-size:1.04rem;font-weight:600;color:#0b2140;margin-bottom:.25rem;line-height:1.2; }
.ttm-task-meta { color:#6b7b8f;font-size:.9rem;margin-bottom:.25rem;letter-spacing:.2px; }
.ttm-task-tags { font-size:.8rem;color:#0984e3;margin-bottom:.2rem;font-weight:500; }
.ttm-priority-badge { display:inline-block;font-size:0.70rem;font-weight:700;border-radius:30px;padding:0.22rem 0.65rem;margin-left:.35rem;margin-bottom:.1rem;color:#fff;letter-spacing:.6px;vertical-align:middle;text-transform:uppercase;background-size:220% 100%;background-position:0 0;animation:shimmer 5s linear infinite;box-shadow:0 0 0 1px rgba(255,255,255,0.6),0 3px 6px -2px rgba(0,0,0,0.25); }
.ttm-priority-Low { background:linear-gradient(120deg,#00b894,#55efc4,#00b894); }
.ttm-priority-Medium { background:linear-gradient(120deg,#0984e3,#74b9ff,#0984e3); }
.ttm-priority-High { background:linear-gradient(120deg,#fdcb6e,#e17055,#fdcb6e); color:#222; }
.ttm-priority-Critical { background:linear-gradient(120deg,#d63031,#ff5f56,#b71c1c); color:#fff; border:2px solid #b71c1c; box-shadow:0 0 0 2px #fff,0 0 10px 2px #d63031; }
.ttm-btn-row { display:flex; gap:.5rem; margin-top:.3rem; }
.ttm-checkline { font-size:0.7rem; margin-top:.35rem; display:flex; align-items:center; gap:6px; color:#35506b; }
.ttm-checkbar { flex:1; background:#e6edf5; border-radius:4px; height:6px; position:relative; overflow:hidden; }
.ttm-checkbar-fill { position:absolute; left:0; top:0; bottom:0; background:linear-gradient(90deg,#00b894,#0b63d6); }
div[data-testid="column"] button { background:linear-gradient(135deg,#0b63d6,#6c5ce7,#00b894); background-size:200% 100%; color:#fff; border:none; border-radius:10px; padding:.42rem 1.1rem; font-size:.75rem; font-weight:600; cursor:pointer; transition:background .35s, transform .18s, box-shadow .25s; box-shadow:0 4px 14px -4px rgba(11,99,214,.45); margin-bottom:.35rem; letter-spacing:.55px; position:relative; overflow:hidden; }
div[data-testid="column"] button:hover { background-position:100% 0; transform:translateY(-2px); box-shadow:0 8px 24px -6px rgba(11,99,214,.60); }
.ttm-inline-btn-row { display:flex; gap:.35rem; margin:-.15rem 0 .45rem 0; }
.ttm-inline-btn-row button { flex:1; }
.ttm-move-prev { background:linear-gradient(135deg,#6c5ce7,#0b63d6) !important; }
.ttm-move-next { background:linear-gradient(135deg,#00b894,#0b63d6) !important; }
.ttm-edit-btn { background:linear-gradient(135deg,#ffdd59,#ffa801) !important; color:#222 !important; }
.ttm-board-col { backdrop-filter: blur(4px); }
.stButton>button, .stDownloadButton>button { border:1px solid rgba(255,255,255,0.15) !important; }
.stButton>button:hover { filter:brightness(1.08); box-shadow:0 0 0 2px rgba(255,255,255,0.15) inset; }
.ttm-status-badge { background:#1e272e; color:#fff; }
.ttm-status-Deferred { background:linear-gradient(135deg,#485460,#1e272e); border:1px dashed #ffa801; }
.ttm-deferred-card { border:1px dashed #ffa801 !important; box-shadow:0 0 0 1px rgba(255,168,1,0.25) inset; }
.ttm-deferred-card .ttm-task-title { color:#ffa801; }
.ttm-del-btn { background:linear-gradient(135deg,#d63031,#b71c1c) !important; }
.ttm-add-pop-btn { background:linear-gradient(135deg,#0b63d6,#6c5ce7,#00b894); background-size:200% 100%; padding:.45rem .9rem; font-size:.68rem; border-radius:8px; font-weight:700; letter-spacing:.7px; }
.ttm-add-pop-btn:hover { background-position:100% 0; }
.ttm-detail { background:#f7fafd; border-radius:14px; box-shadow:0 2px 12px rgba(11,99,214,0.06); padding:1.2rem 1.2rem .7rem 1.2rem; margin-bottom:1.2rem; }
.ttm-detail-title { font-size:1.35rem;font-weight:700;color:#0b63d6;margin-bottom:.5rem; }
.ttm-detail-label { color:#51658a;font-size:.95rem;font-weight:600;margin-top:.7rem; text-transform:uppercase; letter-spacing:.5px; }
.ttm-detail-value { color:#222;font-size:.98rem;margin-bottom:.2rem; }
.ttm-detail-history, .ttm-detail-comments { font-size:.85rem;color:#6b7b8f;margin-bottom:.2rem; }
.ttm-kpi-box { background:linear-gradient(145deg,var(--card-bg),#e9f0f7); border-radius:14px; box-shadow:0 4px 14px -4px rgba(11,99,214,0.20),0 2px 5px -2px rgba(0,0,0,0.10); padding:1.15rem .9rem; text-align:center; position:relative; overflow:hidden; }
.ttm-kpi-box:before { content:""; position:absolute; inset:0; background:linear-gradient(120deg,rgba(11,99,214,0.08),rgba(108,92,231,0.06),rgba(0,184,148,0.1)); opacity:0; transition:opacity .4s; }
.ttm-kpi-box:hover:before { opacity:1; }
.ttm-kpi-label { color:#51658a;font-size:.75rem;font-weight:700;letter-spacing:.6px;text-transform:uppercase; }
.ttm-kpi-value { font-size:1.65rem;font-weight:700;color:#0b63d6;line-height:1; }
.ttm-kpi-bad { color:#d63031 !important; }
.ttm-kpi-warn { color:#e17055 !important; }
.ttm-kpi-good { color:#00b894 !important; }
.ttm-kpi-bar { position:relative;height:6px;background:#e6edf5;border-radius:4px;margin-top:10px;overflow:hidden; }
.ttm-kpi-bar-fill { position:absolute;left:0;top:0;bottom:0;background:linear-gradient(90deg,#00b894,#0b63d6); }
.ttm-filters-bar { background:linear-gradient(145deg,var(--card-bg),#e3edf6); padding:.75rem 1.05rem .55rem 1.05rem; border-radius:20px; box-shadow:0 6px 22px -6px rgba(11,99,214,0.28),0 3px 9px -3px rgba(0,0,0,0.10); margin-bottom:1.3rem; animation:fadeIn .5s ease; position:relative; overflow:visible; }
.ttm-filters-bar:before { content:""; position:absolute; inset:-2px; border-radius:22px; background:linear-gradient(120deg,rgba(11,99,214,.25),rgba(108,92,231,.22),rgba(0,184,148,.25)); filter:blur(14px); opacity:.55; z-index:-1; }
.ttm-filter-grid { display:flex; flex-wrap:wrap; gap:.65rem 1.1rem; align-items:flex-end; }
.ttm-filter-grid > div { flex:1 1 160px; }
.ttm-filter-label { font-size:.65rem; font-weight:700; letter-spacing:.6px; color:#51658a; text-transform:uppercase; margin-bottom:2px; }
.ttm-filter-badge { background:#0b63d6; color:#fff; font-size:.65rem; padding:2px 7px; border-radius:14px; margin-left:6px; letter-spacing:.5px; }
.ttm-section-gap { margin-top:1.1rem; }
div[data-baseweb="tab-list"] { gap:.4rem; }
button[role="tab"] { background:linear-gradient(140deg,#eef4fa,#ffffff); border:1px solid #d0dce8 !important; box-shadow:0 1px 4px rgba(11,99,214,0.08); border-radius:12px !important; padding:.55rem 1.1rem !important; font-weight:600 !important; color:#35506b !important; transition:all .25s !important; }
button[role="tab"][aria-selected="true"] { background:linear-gradient(120deg,#0b63d6,#6c5ce7,#00b894); color:#fff !important; box-shadow:0 4px 14px -4px rgba(11,99,214,0.5); }
button[role="tab"]:hover { transform:translateY(-2px); }
::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-track { background:#f0f5fa; }
::-webkit-scrollbar-thumb { background:linear-gradient(#0b63d6,#6c5ce7); border-radius:20px; }
/* Backlog horizontal strip styling */
.ttm-backlog-strip { display:flex; gap:.9rem; padding:.55rem .65rem .4rem .65rem; overflow-x:auto; scroll-snap-type:x mandatory; background:linear-gradient(145deg,#ffffff,#f2f7fb); border:1px solid #d0dce8; border-radius:20px; box-shadow:0 5px 20px -6px rgba(11,99,214,.18),0 2px 8px -3px rgba(0,0,0,.08); }
.ttm-backlog-strip::-webkit-scrollbar { height:10px; }
.ttm-backlog-strip::-webkit-scrollbar-track { background:transparent; }
.ttm-backlog-strip::-webkit-scrollbar-thumb { background:linear-gradient(90deg,#0b63d6,#6c5ce7,#00b894); border-radius:20px; }
.ttm-backlog-item { min-width:250px; max-width:260px; flex:0 0 auto; scroll-snap-align:start; }
.ttm-backlog-item .ttm-task-card { margin-bottom:.4rem; }
/* Subtle hover lift for backlog grouping */
.ttm-backlog-item .ttm-task-card:hover { box-shadow:0 10px 28px -8px rgba(11,99,214,0.40),0 4px 12px -5px rgba(0,0,0,0.18); }
@media (max-width: 1100px){ .ttm-backlog-item { min-width:220px; max-width:230px; } }
/* (Removed horizontal board styles; restoring vertical Kanban columns) */

/* Time window pill group */
.ttm-time-filter {display:flex;flex-wrap:wrap;gap:6px;margin:6px 4px 4px 4px;}
.ttm-time-pill {cursor:pointer;padding:4px 12px;font-size:0.68rem;font-weight:700;letter-spacing:.5px;border:1px solid #cdd9e5;color:#35506b;border-radius:22px;background:linear-gradient(145deg,#ffffff,#f2f7fb);box-shadow:0 2px 6px -2px rgba(11,99,214,0.25);user-select:none;transition:all .25s;}
.ttm-time-pill:hover {background:linear-gradient(145deg,#eef4fa,#ffffff);}
.ttm-time-pill.active {background:linear-gradient(120deg,#0b63d6,#6c5ce7,#00b894);color:#fff;border:1px solid #0b63d6;box-shadow:0 4px 14px -4px rgba(11,99,214,0.5);}

/* Time window pill buttons (beautified) */
div[data-testid="column"] .stButton>button[id^="tw-pill-"] {
    position:relative;
    cursor:pointer;
    padding:6px 16px 6px 16px;
    font-size:0.70rem;
    font-weight:600;
    letter-spacing:.55px;
    border:1px solid rgba(11,99,214,0.18) !important;
    color:#21405e;
    border-radius:28px;
    background:linear-gradient(160deg,#ffffff 0%,#f4f8fc 55%,#eef4fa 100%);
    box-shadow:0 2px 6px -2px rgba(11,99,214,0.25),0 0 0 0 rgba(11,99,214,0.25);
    transition:all .28s cubic-bezier(.4,.14,.3,1);
    backdrop-filter:blur(3px);
    -webkit-backdrop-filter:blur(3px);
    min-width:60px;
}
div[data-testid="column"] .stButton>button[id^="tw-pill-"]:hover {
    box-shadow:0 4px 14px -4px rgba(11,99,214,0.32);
    transform:translateY(-1px);
    background:linear-gradient(155deg,#ffffff 0%,#f0f6fb 55%,#e9f2fa 100%);
}
/* Active (detected via leading checkmark) */
div[data-testid="column"] .stButton>button[id^="tw-pill-"] p {margin:0;}
div[data-testid="column"] .stButton>button[id^="tw-pill-"]:has(p:contains("âœ“")) {
    background:linear-gradient(120deg,#0b63d6,#6c5ce7,#00b894) !important;
    color:#fff !important;
    border:1px solid #0b63d6 !important;
    box-shadow:0 6px 18px -4px rgba(11,99,214,0.55),0 0 0 1px rgba(255,255,255,0.15) inset;
}
/* Subtle glow ring on active */
div[data-testid="column"] .stButton>button[id^="tw-pill-"]:has(p:contains("âœ“"))::after {
    content:"";position:absolute;inset:0;border-radius:inherit;padding:1px;background:linear-gradient(120deg,#0b63d6,#6c5ce7,#00b894);-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);mask-composite:exclude;opacity:.55;
}
/* Remove default focus outline & replace */
div[data-testid="column"] .stButton>button[id^="tw-pill-"]:focus-visible {outline:none;box-shadow:0 0 0 3px rgba(11,99,214,0.45);}        
/* Compact text container click pass-through */
div[data-testid="column"] .stButton>button[id^="tw-pill-"] span {pointer-events:none;}

.ttm-filter-summary {margin:6px 0 16px 0;display:flex;align-items:center;gap:14px;padding:12px 20px;border:1px solid #d4e1ed;border-radius:20px;background:linear-gradient(140deg,#ffffff,#f5f9fc);box-shadow:0 4px 16px -6px rgba(11,99,214,0.18);} 
.ttm-filter-summary-label {font-size:.68rem;font-weight:700;letter-spacing:.6px;color:#51658a;text-transform:uppercase;}
.ttm-filter-summary-value {font-size:1.55rem;font-weight:700;line-height:1;background:linear-gradient(120deg,#0b63d6,#6c5ce7,#00b894);-webkit-background-clip:text;background-clip:text;color:transparent;}
@media (max-width: 640px){.ttm-filter-summary {padding:10px 16px;}}

.ttm-deep-wrap {animation: fadeSlideIn .45s ease;}
@keyframes fadeSlideIn {0%{opacity:0;transform:translateY(10px);}100%{opacity:1;transform:translateY(0);} }
.ttm-back-btn button {background:linear-gradient(120deg,#6c5ce7,#0b63d6);}
.ttm-section {background:linear-gradient(145deg,var(--card-bg),#e6eef5);border:1px solid #d0dae4;border-radius:18px;padding:20px 22px;margin-bottom:18px;box-shadow:0 6px 24px -6px rgba(11,99,214,.20);}        
.ttm-hist-item {font-size:0.72rem;margin:0 0 4px 0;padding:4px 8px;border-radius:8px;background:#f1f6fb;}
.ttm-hist-item span.meta {color:#51658a;font-size:0.6rem;margin-left:6px;}
.ttm-chip {display:inline-block;padding:4px 8px;font-size:0.55rem;font-weight:600;background:#eef4fa;border:1px solid #d0dce8;border-radius:20px;margin:0 6px 6px 0;letter-spacing:.5px;}
.ttm-inline-kv {display:grid;grid-template-columns:140px 1fr;gap:4px 14px;font-size:0.75rem;margin-top:4px;}
.ttm-inline-kv div.key {font-weight:600;color:#51658a;text-transform:uppercase;letter-spacing:.5px;}
.ttm-section h3 {margin:0 0 10px 0;font-size:1rem;color:#0b2140;}
.ttm-edit-grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px;}

.ttm-doc h3 {margin-top:1.4rem;margin-bottom:0.4rem;color:#0b2140;}
.ttm-doc p {margin:0.25rem 0 0.6rem 0;line-height:1.35em;color:#34495e;}
.ttm-doc code {background:#f3f7fb;padding:2px 6px;border-radius:6px;font-size:0.8rem;}
.ttm-badge {display:inline-block;background:linear-gradient(120deg,#0b63d6,#6c5ce7,#00b894);color:#fff;padding:2px 9px;border-radius:14px;font-size:0.65rem;font-weight:600;letter-spacing:.5px;margin-right:6px;}
.ttm-flow {display:flex;flex-wrap:wrap;gap:6px;margin:6px 0 12px 0;}
.ttm-flow span {background:#eef4fa;padding:6px 12px;border-radius:12px;font-size:0.75rem;font-weight:600;color:#35506b;position:relative;}
.ttm-flow span:after {content:'â†’';position:absolute;right:-10px;top:50%;transform:translateY(-50%);font-size:0.75rem;color:#6c5ce7;}
.ttm-flow span:last-child:after {display:none;}
.ttm-callout {background:linear-gradient(145deg,#ffffff,#f2f7fb);border:1px solid #d0dce8;padding:12px 14px;border-radius:14px;font-size:0.75rem;color:#274056;box-shadow:0 4px 14px -6px rgba(11,99,214,0.18);}    
.ttm-grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px;margin-top:10px;}
.ttm-card {background:var(--card-bg);border:1px solid #d4dee8;border-radius:14px;padding:14px 16px;box-shadow:0 4px 18px -6px rgba(11,99,214,0.18);}
.ttm-card h4 {margin:0 0 6px 0;font-size:0.9rem;color:#0b2140;letter-spacing:.5px;}
.ttm-card ul {margin:0 0 0.2rem 1.0rem;padding:0;font-size:0.72rem;}
.ttm-card li {margin:0 0 4px 0;}
.ttm-sect {margin-top:1.2rem;}
